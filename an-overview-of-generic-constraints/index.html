<!DOCTYPE html>
<html lang="en" data-theme="dark"><head>
    <title>An Overview of Generic Constraints | David Haney</title>
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-2YNL1EJF5C"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  
	</script>
	
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-PR2HVYP6QG"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  gtag('config', 'G-PR2HVYP6QG');
	</script>
    
    <meta charset="utf-8"><meta name="generator" content="Hugo 0.78.1" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="Programmer / Engineering Manager">
    
    <link rel="stylesheet"
          href="https://www.davidhaney.io/css/style.min.2b188541d728e8afd69a6f1b8b83f89f2b138d671fb728eff20ff3f3dcf5b55e.css"
          integrity="sha256-KxiFQdco6K/Wmm8bi4P4nysTjWcftyjv8g/z89z1tV4="
          crossorigin="anonymous"
          type="text/css">
    <link rel="stylesheet"
          href="https://www.davidhaney.io/css/syntax.21cc1ccec065ce1e0f94f7a6a5a26cb58c9044e659b5010305c81fe0a1d47029.css"
          integrity="sha256-IcwczsBlzh4PlPempaJstYyQROZZtQEDBcgf4KHUcCk="
          crossorigin="anonymous"
          type="text/css"><link rel="stylesheet" 
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" 
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" 
    crossorigin="anonymous" />

    
    <link rel="shortcut icon" href="https://www.davidhaney.io/favicons/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://www.davidhaney.io/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://www.davidhaney.io/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://www.davidhaney.io/favicons/favicon-16x16.png">

    <link rel="canonical" href="https://www.davidhaney.io/an-overview-of-generic-constraints/">

    
    
    
    
    <script type="text/javascript"
            src="https://www.davidhaney.io/js/anatole-header.min.e782db136ec18d105a4552702eac49f4620d6867da3fbf808bd53e806c96be6e.js"
            integrity="sha256-54LbE27BjRBaRVJwLqxJ9GINaGfaP7&#43;Ai9U&#43;gGyWvm4="
            crossorigin="anonymous"></script>
    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://www.davidhaney.io/img/opengraph.png"/>

<meta name="twitter:title" content="An Overview of Generic Constraints"/>
<meta name="twitter:description" content="This is my first post. I hope that it doesn’t suck.
As of .NET 2.0, Microsoft introduced the concept of generics. Generics is a concept that allow you to “template” methods and types such as classes and interfaces in a (generally) type-safe way."/>

</head>
<body><div class="sidebar animated fadeInDown">
    <div class="logo-title">
        <div class="title">
            <img src="https://www.davidhaney.io/img/me.jpg" alt="profile picture">
            <h3 title=""><a href="/">David Haney</a></h3>
            <div class="description">
                <p>Programmer / Engineering Manager</p>
            </div>
        </div>
    </div>
    <ul class="social-links">
        
            <li>
                <a href="https://www.github.com/haneytron" rel="me" aria-label="GitHub">
                    <i class="fab fa-github fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
            <li>
                <a href="https://www.twitter.com/haneytron" rel="me" aria-label="Twitter">
                    <i class="fab fa-twitter fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
            <li>
                <a href="https://www.linkedin.com/in/davidahaney" rel="me" aria-label="Linkedin">
                    <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
    </ul>
    <div class="footer">
        <div class="by_farbox">&copy; David Haney 2020 </div>
    </div>
</div>
<div class="main">
    <div class="page-top animated fadeInDown">
    <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
    </a>
    <ul class="nav" id="navMenu">
        
        
            
            <li><a 
                   href="/"
                        
                   title="">Home</a></li>
        
            
            <li><a 
                   href="/post/"
                        
                   title="">Posts</a></li>
        
            
            <li><a 
                   href="/tags/"
                        
                   title="">Tags</a></li>
        
        
        <li class="theme-switch-item">
            <a class="theme-switch" title="Switch Theme">
                <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>

    <div class="autopagerize_page_element">
        <div class="content">
    <div class="post animated fadeInDown">
        <div class="post-content">

            <div class="post-title">
                <h3>An Overview of Generic Constraints</h3>
                
                    <div class="info">
                        <em class="fa fa-sun-o"></em>
                        <span class="date">Tue, Apr 24, 2012</span>
                        <em class="fa fa-clock-o"></em>
                        <span class="reading-time">4-minute read</span>
                    </div>
                
            </div>

            <p>This is my first post. I hope that it doesn’t suck.</p>
<p>As of .NET 2.0, Microsoft introduced the concept of generics. Generics is a concept that allow you to “template” methods and types such as classes and interfaces in a (generally) type-safe way. Upon compilation, generic type metadata is stored in IL, and JIT’d as you reference the generic method or class with an actual type at runtime. Value types each get their own “copy” of the JIT’d generic code, whereas reference types share a single instance of the code. This is because the generic implementation is identical for reference types – they’re all just pointers.</p>
<p>Anyway, you probably use generics daily, whether or not you know them by name. Ever used <code>List&lt;T&gt;</code>? <code>IEnumerable&lt;T&gt;</code>? <code>Dictionary&lt;TKey, TValue&gt;</code>? Those are pre-built generic classes and interfaces which are included in the .NET libraries.</p>
<p>You can build your own generic classes and methods in C#. Many people do this also daily. Perhaps to create a custom collection or caching method… but, have you ever used generic constraints?</p>
<p>Generic constraints allow you to constrain, or restrict, the types that can be used by your generic classes and methods. This enables you to examine the generic type with certainty about it’s functionality. Why does this matter? It allows you to invoke methods or properties on your type <em>without using reflection.</em></p>
<p>The syntax is such that at the type or method definition, you add “where T : <strong>your constraints here</strong>“. An example:</p>
<pre><code>public static T Create&lt;T&gt; where T : new()
</code></pre>
<p>The “new()” in this case indicates that whatever type is passed to this method <strong><em>MUST</em></strong> have a parameterless constructor. What does this afford you? You can now <em>new up T in your method!</em></p>
<p>As a simple example, let us create the static factory method above that serves only to return a newly created instance of the generic type parameter:</p>
<pre><code>/// &lt;summary&gt;
/// Creates an object of Type T.
/// &lt;/summary&gt;
/// &lt;typeparam name=&quot;T&quot;&gt;The Type to Create.&lt;/typeparam&gt;
/// &lt;returns&gt;An instantiated Type of T.&lt;/returns&gt;
public static T Create&lt;T&gt;() where T : new()
{
    return new T();
}
</code></pre>
<p>Sweet! Now we can new up stuff like crazy. Let’s define a “Hat” class that represents a hat:</p>
<pre><code>/// &lt;summary&gt;
/// A Hat.
/// &lt;/summary&gt;
public class Hat
{
    /// &lt;summary&gt;
    /// The Size of the Hat.
    /// &lt;/summary&gt;
    public int Size { get; set; }
}
</code></pre>
<p>Now let’s new that bad boy up:</p>
<pre><code>static void Main(string[] args)
{
    var myHat = Create&lt;Hat&gt;();
}
</code></pre>
<p>Voila, we just made a hat with generics and generic constraints! But that’s pretty boring, and you might ask “why not just new up the bloody hat and skip all of that factory stuff?” Good question. We’ll discuss that in the future, but there are many reasons you might wish not to directly instantiate a concrete type in your methods or classes.</p>
<p>Let’s take a more practical example. Let us define the Size property in an interface and make the Hat implement that interface:</p>
<pre><code>/// &lt;summary&gt;
/// A Hat.
/// &lt;/summary&gt;
public class Hat : IHaveASize
{
    /// &lt;summary&gt;
    /// The Size of the Hat.
    /// &lt;/summary&gt;
    public int Size { get; set; }
}

/// &lt;summary&gt;
/// Represents an object that has a Size.
/// &lt;/summary&gt;
public interface IHaveASize
{
    /// &lt;summary&gt;
    /// The Size.
    /// &lt;/summary&gt;
    int Size { get; set; }
}
</code></pre>
<p>Now let’s create a generic method that checks if a size is “valid” which we’ll define as being greater than 0.</p>
<pre><code>/// &lt;summary&gt;
/// Determines whether or not Type T has a Valid Size.
/// &lt;/summary&gt;
/// &lt;typeparam name=&quot;T&quot;&gt;The Type.&lt;/typeparam&gt;
/// &lt;param name=&quot;sizedObject&quot;&gt;The object which has a Size.&lt;/param&gt;
/// &lt;returns&gt;true if the Size is greater than 0, false otherwise.&lt;/returns&gt;
public static bool IsSizeValid&lt;T&gt;(T sizedObject) where T : IHaveASize
{
    return sizedObject.Size &gt; 0;
}
</code></pre>
<p>Note that we can access the Size property in the IsSizeValid method because of our generic constraint! Now to execute the code:</p>
<pre><code>static void Main(string[] args)
{
    var myHat = Create&lt;Hat&gt;();

    // We don't have to say IsSizeValid&lt;Hat&gt;(myHat) - the type is inferred by the parameter!
    var result = IsSizeValid(myHat);
}
</code></pre>
<p>And there you have it. An introduction into generic constraints!</p>

        </div>
        <div class="post-footer">
            <div class="info">
                <span class="separator"><a class="category" href="/categories/blog/">blog</a></span>

                <span class="separator"><a class="tag" href="/tags/dotnet/">dotnet</a><a class="tag" href="/tags/csharp/">csharp</a><a class="tag" href="/tags/generics/">generics</a><a class="tag" href="/tags/programming/">programming</a></span>

            </div>
        </div>

        
            <div id="fb_comments_container">
                    <h2>comments</h2>
                    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "haney" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                </div>
        
    </div>


        </div>
    </div>
</div>

<script type="text/javascript"
        src="https://www.davidhaney.io/js/jquery.min.86b1e8f819ee2d9099a783e50b49dff24282545fc40773861f9126b921532e4c.js"
        integrity="sha256-hrHo&#43;BnuLZCZp4PlC0nf8kKCVF/EB3OGH5EmuSFTLkw="
        crossorigin="anonymous"></script>




<script type="text/javascript"
        src="https://www.davidhaney.io/js/bundle.min.0f9c74cb78f13d1f15f33daff4037c70354f98acfbb97a6f61708966675c3cae.js"
        integrity="sha256-D5x0y3jxPR8V8z2v9AN8cDVPmKz7uXpvYXCJZmdcPK4="
        crossorigin="anonymous"></script>

<script type="text/javascript"
        src="https://www.davidhaney.io/js/medium-zoom.min.92f21c856129f84aeb719459b3e6ac621a3032fd7b180a18c04e1d12083f8aba.js"
        integrity="sha256-kvIchWEp&#43;ErrcZRZs&#43;asYhowMv17GAoYwE4dEgg/iro="
        crossorigin="anonymous"></script>
</body>

</html>
